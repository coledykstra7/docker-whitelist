# Dockerfile for Go web app (squid-editor)
FROM golang:1.21-alpine
WORKDIR /app
RUN apk add --no-cache docker-cli
COPY src/go.mod src/go.sum ./src/
WORKDIR /app/src
RUN go mod download
WORKDIR /app
COPY src/ ./src/
COPY html ./html
WORKDIR /app/src
RUN go build -o ../squid-editor .
WORKDIR /app
EXPOSE 8080
CMD ["/app/squid-editor"]
